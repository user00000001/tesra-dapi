module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=require("window-post-message-proxy")},function(e,t){e.exports=require("crypto-js")},function(e,t){e.exports=require("webextension-polyfill-ts")},function(e,t){e.exports=require("promise-timeout")},function(e,t){e.exports=require("base-x")},function(e,t){e.exports=require("typedarray-to-buffer")},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"registerClient",function(){return d}),n.d(r,"api",function(){return S});var o={};n.r(o),n.d(o,"registerContentProxy",function(){return W}),n.d(o,"registerProvider",function(){return j});var s=n(0);class a{constructor(e){if(this.source=e.source,this.destination=e.destination,this.postMessage=e.postMessage,this.messageHandler=e.messageHandler,this.logMessages=e.logMessages,void 0===e.addListener&&void 0===e.postMessage)throw new Error("Either addListener or postMessage must be present.");if(void 0!==e.addListener){if(void 0===e.messageHandler)throw new Error("MessageHandler must be specified if addListener present.");e.addListener(this.onMessage.bind(this))}}async send(e){const t={destination:this.destination,payload:e,source:this.source,type:"dAPI.js"};if(void 0===this.postMessage)throw new Error("PostMessage was not specified.");this.logMessages&&console.warn(`Tunnel: (${this.source}): Sending`,JSON.stringify(e,null,"  "));const n=await this.postMessage(t);if(void 0!==n.error)throw new Error(n.error);return n.payload}onMessage(e,t){if(e.destination===this.source&&e.source===this.destination){let n;try{if(void 0===this.messageHandler)throw new Error("MessageHandler was not specified.");this.logMessages&&console.warn(`Tunnel: (${this.source}): Receiving`,JSON.stringify(e.payload,null,"  "));const r={id:t.id,url:t.url},o=this.messageHandler(e.payload,r);n=Promise.resolve(o)}catch(e){n=Promise.reject(e)}return n.then(t=>({destination:e.source,payload:t,source:e.destination,type:"dAPI.js"})).catch(t=>({destination:e.source,error:t,source:e.destination,type:"dAPI.js"}))}}}class i{constructor(e){e.messageHandler=this.messageHandler.bind(this),this.tunnel=new a(e),this.methods=new Map}call(e,...t){const n={method:e,params:t};return this.tunnel.send(n)}register(e,t){this.methods.set(e,t)}messageHandler(e,t){const n=this.methods.get(e.method);if(void 0===n)throw new Error("Unregistered method call: "+e.method);return n.call(t,...e.params)}}let g,c;function d({logMessages:e=!1,logWarnings:t=!1}){g=new s.WindowPostMessageProxy({name:"page",target:"content-script",logMessages:e,suppressWarnings:!t}),c=new i({source:"page",destination:"background",logMessages:!1,postMessage:g.postMessage.bind(g,window)})}async function l(e,...t){return c.call(e,...t)}const u={getAccount:()=>l("asset.getAccount"),getPublicKey:()=>l("asset.getPublicKey"),send:e=>l("asset.send",e)},k={getIdentity:()=>l("identity.getIdentity"),getDDO:e=>l("identity.getDDO",e),addAttributes:e=>l("identity.addAttributes",e),removeAttribute:e=>l("identity.removeAttribute",e)},w={signMessageHash:e=>l("message.signMessageHash",e),verifyMessageHash:e=>l("message.verifyMessageHash",e),signMessage:e=>l("message.signMessage",e),verifyMessage:e=>l("message.verifyMessage",e)},p={getNodeCount:()=>l("network.getNodeCount"),getBlockHeight:()=>l("network.getBlockHeight"),getMerkleProof:e=>l("network.getMerkleProof",e),getStorage:e=>l("network.getStorage",e),getAllowance:e=>l("network.getAllowance",e),getBlock:e=>l("network.getBlock",e),getTransaction:e=>l("network.getTransaction",e),getNetwork:()=>l("network.getNetwork"),getBalance:e=>l("network.getBalance",e),isConnected:()=>l("network.isConnected"),getUnboundTsg:e=>l("network.getUnboundTsg",e),getContract:e=>l("network.getContract",e),getSmartCodeEvent:e=>l("network.getSmartCodeEvent",e),getBlockHeightByTxHash:e=>l("network.getBlockHeightByTxHash",e),getBlockHash:e=>l("network.getBlockHash",e),getBlockTxsByHeight:e=>l("network.getBlockTxsByHeight",e),getGasPrice:()=>l("network.getGasPrice"),getGrantTsg:e=>l("network.getGrantTsg",e),getMempoolTxCount:()=>l("network.getMempoolTxCount"),getMempoolTxState:e=>l("network.getMempoolTxState",e),getVersion:()=>l("network.getVersion")};var m=n(3);const h={getProvider:()=>Object(m.timeout)(l("provider.getProvider"),1e3).catch(()=>Promise.reject("NO_PROVIDER"))},f={invoke:e=>l("smartContract.invoke",e),invokeRead:e=>l("smartContract.invokeRead",e),deploy:e=>l("smartContract.deploy",e),invokeWasm:e=>l("smartContract.invokeWasm",e),invokeWasmRead:e=>l("smartContract.invokeWasmRead",e)},y={login:()=>l("stateChannel.login"),sign:e=>l("stateChannel.sign",e)};var v=n(4),M=n(1);const C=n(5),b=v("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function T(e){const t=A(b.decode(e)).substr(2,40);if(e!==P(t))throw new Error("[addressToU160] decode encoded verify failed");return t}const H="17";function P(e){const t=H+e,n=x(t),r=x(n).slice(0,8),o=C(new Uint8Array(B(t+r)));return b.encode(o)}function x(e){const t=M.enc.Hex.parse(e);return M.SHA256(t).toString()}function B(e){const t=[];for(;e.length>=2;)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t}function A(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++){let r=n[e].toString(16);t+=r=0===r.length?"00":1===r.length?"0"+r:r}return t}const S={asset:u,identity:k,message:w,network:p,provider:h,smartContract:f,stateChannel:y,utils:{strToHex:e=>A(function(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)n[t]=e.charCodeAt(t);return t}(e)),hexToStr(e){return t=B(e),String.fromCharCode.apply(null,new Uint8Array(t));var t},addressToHex:e=>T(e),hexToAddress:e=>P(e),isAddress(e){try{return T(e),!0}catch(e){return!1}}}};var E=n(2);let O;function W({logMessages:e=!1,logWarnings:t=!1}){new s.WindowPostMessageProxy({logMessages:e,suppressWarnings:!t,name:"content-script",target:"page"}).addHandler({handle:e=>E.browser.runtime.sendMessage(e),test:e=>"dAPI.js"===e.type&&"page"===e.source})}function j({provider:e,logMessages:t}){function n(e,t){if(void 0===t)throw new Error("DApi provider does not implement "+e);O.register(e,t)}O=new i({source:"background",destination:"page",logMessages:t,addListener:E.browser.runtime.onMessage.addListener}),n("asset.getAccount",e.asset.getAccount),n("asset.getPublicKey",e.asset.getPublicKey),n("asset.send",e.asset.send),n("identity.getIdentity",e.identity.getIdentity),n("identity.getDDO",e.identity.getDDO),n("identity.addAttributes",e.identity.addAttributes),n("identity.removeAttribute",e.identity.removeAttribute),n("message.signMessage",e.message.signMessage),n("message.verifyMessage",e.message.verifyMessage),n("message.signMessageHash",e.message.signMessageHash),n("message.verifyMessageHash",e.message.verifyMessageHash),n("network.getAllowance",e.network.getAllowance),n("network.getBalance",e.network.getBalance),n("network.getBlock",e.network.getBlock),n("network.getBlockHeight",e.network.getBlockHeight),n("network.getMerkleProof",e.network.getMerkleProof),n("network.getNetwork",e.network.getNetwork),n("network.getNodeCount",e.network.getNodeCount),n("network.getStorage",e.network.getStorage),n("network.getTransaction",e.network.getTransaction),n("network.isConnected",e.network.isConnected),n("network.getUnboundTsg",e.network.getUnboundTsg),n("network.getContract",e.network.getContract),n("network.getSmartCodeEvent",e.network.getSmartCodeEvent),n("network.getBlockHeightByTxHash",e.network.getBlockHeightByTxHash),n("network.getBlockHash",e.network.getBlockHash),n("network.getBlockTxsByHeight",e.network.getBlockTxsByHeight),n("network.getGasPrice",e.network.getGasPrice),n("network.getGrantTsg",e.network.getGrantTsg),n("network.getMempoolTxCount",e.network.getMempoolTxCount),n("network.getMempoolTxState",e.network.getMempoolTxState),n("network.getVersion",e.network.getVersion),n("smartContract.invoke",e.smartContract.invoke),n("smartContract.invokeRead",e.smartContract.invokeRead),n("smartContract.deploy",e.smartContract.deploy),n("smartContract.invokeWasm",e.smartContract.invokeWasm),n("smartContract.invokeWasmRead",e.smartContract.invokeWasmRead),n("provider.getProvider",e.provider.getProvider),n("stateChannel.login",e.stateChannel.login),n("stateChannel.sign",e.stateChannel.sign)}var N,D;!function(e){e[e.BookKeeper=2]="BookKeeper",e[e.Claim=3]="Claim",e[e.Deploy=208]="Deploy",e[e.Invoke=209]="Invoke",e[e.Enrollment=4]="Enrollment",e[e.Vote=5]="Vote"}(N||(N={})),function(e){e[e.NEOVM_TYPE=1]="NEOVM_TYPE",e[e.WASMVM_TYPE=3]="WASMVM_TYPE"}(D||(D={})),n.d(t,"TransactionType",function(){return N}),n.d(t,"VmType",function(){return D}),n.d(t,"client",function(){return r}),n.d(t,"provider",function(){return o}),n.d(t,"Tunnel",function(){return a}),n.d(t,"Rpc",function(){return i})}]);
//# sourceMappingURL=index.js.map