{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api/index.ts","webpack:///./src/api/types.ts","webpack:///./src/client/asset.ts","webpack:///./src/client/identity.ts","webpack:///./src/client/index.ts","webpack:///./src/client/message.ts","webpack:///./src/client/network.ts","webpack:///./src/client/provider.ts","webpack:///./src/client/proxy.ts","webpack:///./src/client/smartContract.ts","webpack:///./src/client/stateChannel.ts","webpack:///./src/client/utils.ts","webpack:///./src/index.ts","webpack:///./src/provider.ts","webpack:///./src/rpc/rpc.ts","webpack:///./src/rpc/tunnel.ts","webpack:///external \"@ont-community/window-post-message-proxy\"","webpack:///external \"base-x\"","webpack:///external \"crypto-js\"","webpack:///external \"promise-timeout\"","webpack:///external \"typedarray-to-buffer\"","webpack:///external \"webextension-polyfill-ts\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { AssetApi } from './asset';\nimport { IdentityApi } from './identity';\nimport { MessageApi } from './message';\nimport { NetworkApi } from './network';\nimport { ProviderApi } from './provider';\nimport { SmartContractApi } from './smartContract';\nimport { StateChannelApi } from './stateChannel';\nimport { UtilsApi } from './utils';\n\nexport * from './types';\nexport { AssetApi } from './asset';\nexport { IdentityApi } from './identity';\nexport { MessageApi } from './message';\nexport { NetworkApi } from './network';\nexport { ProviderApi } from './provider';\nexport { SmartContractApi } from './smartContract';\nexport { StateChannelApi } from './stateChannel';\nexport { UtilsApi } from './utils';\n\nexport interface DApi {\n  asset: AssetApi;\n  identity: IdentityApi;\n  message: MessageApi;\n  network: NetworkApi;\n  provider: ProviderApi;\n  smartContract: SmartContractApi;\n  utils: UtilsApi;\n  stateChannel: StateChannelApi;\n}\n","export type NetworkType = 'MAIN' | 'TEST' | 'PRIVATE';\n\nexport type Asset = 'ONT' | 'ONG' | string;\n\nexport enum TransactionType {\n  BookKeeper = 2,\n  Claim = 3,\n  Deploy = 208,\n  Invoke = 209,\n  Enrollment = 4,\n  Vote = 5\n}\n\nexport enum VmType  {\n    NEOVM_TYPE = 1,\n    WASMVM_TYPE = 3\n}\n\nexport type EventListener = (data: any) => void;\n\nexport type ParameterType = 'Boolean' | 'Integer' | 'ByteArray' | 'Struct' | 'Map' | 'String' | 'Array' | 'Address';\n\nexport interface Parameter {\n  type: ParameterType;\n  value: any;\n}\n\nexport interface BlockHeader {\n  Version: number;\n  PrevBlockHash: string;\n  TransactionsRoot: string;\n  BlockRoot: string;\n  Timestamp: number;\n  Height: number;\n  ConsensusData: number;\n  ConsensusPayload: string;\n  NextBookkeeper: string;\n  Bookkeepers: string[];\n  SigData: string[];\n  Hash: string;\n}\n\nexport interface Block {\n  Hash: string;\n  Size: number;\n  Header: BlockHeader;\n  Transactions: Transaction[];\n}\n\nexport interface TxSignature {\n  PubKeys: string[];\n  M: number;\n  SigData: string[];\n}\n\nexport interface Transaction {\n  Version: number;\n  Nonce: number;\n  GasPrice: number;\n  GasLimit: number;\n  Payer: string;\n  TxType: TransactionType;\n  Payload: any;\n  Attributes: any[];\n  Sigs: TxSignature[];\n  Hash: string;\n  Height: number;\n}\n\nexport interface MerkleProof {\n  Type: string;\n  TransactionsRoot: string;\n  BlockHeight: number;\n  CurBlockRoot: string;\n  CurBlockHeight: number;\n  TargetHashes: string[];\n}\n\nexport interface Balance {\n  ONT: string;\n  ONG: string;\n\n  [key: string]: string;\n}\n\nexport interface OntIdAttribute {\n  key: string;\n  type: string;\n  value: string;\n}\n\nexport interface OntIdDDO {\n  attributes: OntIdAttribute[];\n}\n\nexport interface Provider {\n  name: string;\n  version: string;\n  compatibility: string[];\n}\n\nexport interface Network {\n  type: NetworkType;\n  address: string;\n}\n\nexport type Result = string[];\n\nexport interface Response {\n  transaction: string;\n  results: Result[];\n}\n\nexport interface Signature {\n  publicKey: string;\n  data: string;\n}\n\nexport interface Contract {\n  Code: string;\n  NeedStorage: boolean;\n  Name: string;\n  CodeVersion: string;\n  Author: string;\n  Email: string;\n  Description: string;\n}\n\nexport interface BlockWithTxList {\n  Hash: string;\n  Height: number;\n  Transactions: string[];\n}\n\nexport interface GasPrice {\n  gasPrice: number;\n  height: number;\n}\n\n","import { AssetApi } from '../api/asset';\nimport { call } from './proxy';\n\nexport const assetApi: AssetApi = {\n  getAccount() {\n    return call<string>('asset.getAccount');\n  },\n\n  getPublicKey() {\n    return call<string>('asset.getPublicKey');\n  },\n\n  send(args) {\n    return call<string>('asset.send', args);\n  }\n};\n","import { IdentityApi } from '../api/identity';\nimport { OntIdDDO } from '../api/types';\nimport { call } from './proxy';\n\nexport const identityApi: IdentityApi = {\n  getIdentity() {\n    return call<string>('identity.getIdentity');\n  },\n  getDDO(args) {\n    return call<OntIdDDO>('identity.getDDO', args);\n  },\n  addAttributes(args) {\n    return call<void>('identity.addAttributes', args);\n  },\n  removeAttribute(args) {\n    return call<void>('identity.removeAttribute', args);\n  }\n};\n","import { DApi } from '../api';\nimport { assetApi as asset } from './asset';\nimport { identityApi as identity } from './identity';\nimport { messageApi as message } from './message';\nimport { networkApi as network } from './network';\nimport { providerApi as provider } from './provider';\nimport { registerClient } from './proxy';\nimport { smartContractApi as smartContract } from './smartContract';\nimport { stateChannelApi as stateChannel } from './stateChannel';\nimport { utilsApi as utils } from './utils';\n\nconst api: DApi = {\n  asset,\n  identity,\n  message,\n  network,\n  provider,\n  smartContract,\n  stateChannel,\n  utils\n};\n\nexport { registerClient, api };\n","import { MessageApi } from '../api/message';\nimport { Signature } from '../api/types';\nimport { call } from './proxy';\n\nexport const messageApi: MessageApi = {\n  signMessageHash(args) {\n    return call<Signature>('message.signMessageHash', args);\n  },\n  verifyMessageHash(args) {\n    return call<boolean>('message.verifyMessageHash', args);\n  },\n\n  signMessage(args) {\n    return call<Signature>('message.signMessage', args);\n  },\n  verifyMessage(args) {\n    return call<boolean>('message.verifyMessage', args);\n  }\n};\n","import { NetworkApi } from '../api/network';\nimport { Balance, Block, BlockWithTxList, Contract, GasPrice, MerkleProof, Network, Transaction } from '../api/types';\nimport { call } from './proxy';\n\nexport const networkApi: NetworkApi = {\n  getNodeCount() {\n    return call<number>('network.getNodeCount');\n  },\n\n  getBlockHeight() {\n    return call<number>('network.getBlockHeight');\n  },\n\n  getMerkleProof(args) {\n    return call<MerkleProof>('network.getMerkleProof', args);\n  },\n\n  getStorage(args) {\n    return call<string>('network.getStorage', args);\n  },\n\n  getAllowance(args) {\n    return call<number>('network.getAllowance', args);\n  },\n\n  getBlock(args) {\n    return call<Block>('network.getBlock', args);\n  },\n\n  getTransaction(args) {\n    return call<Transaction>('network.getTransaction', args);\n  },\n\n  getNetwork() {\n    return call<Network>('network.getNetwork');\n  },\n\n  getBalance(args) {\n    return call<Balance>('network.getBalance', args);\n  },\n\n  isConnected() {\n    return call<boolean>('network.isConnected');\n  },\n\n  getUnboundOng(args) {\n    return call<string>('network.getUnboundOng', args);\n  },\n  getContract(args) {\n    return call<Contract>('network.getContract', args);\n  },\n  getSmartCodeEvent(args) {\n    return call<any>('network.getSmartCodeEvent', args);\n  },\n  getBlockHeightByTxHash(args) {\n    return call<number>('network.getBlockHeightByTxHash', args);\n  },\n\n  getBlockHash(args) {\n    return call<string>('network.getBlockHash', args);\n  },\n  getBlockTxsByHeight(args) {\n    return call<BlockWithTxList>('network.getBlockTxsByHeight', args);\n  },\n  getGasPrice() {\n    return call<GasPrice>('network.getGasPrice');\n  },\n  getGrantOng(args) {\n    return call<string>('network.getGrantOng', args);\n  },\n  getMempoolTxCount() {\n    return call<number[]>('network.getMempoolTxCount');\n  },\n  getMempoolTxState(args) {\n    return call<any>('network.getMempoolTxState', args);\n  },\n  getVersion() {\n    return call<string>('network.getVersion');\n  }\n};\n","import { timeout } from 'promise-timeout';\nimport { ProviderApi } from '../api/provider';\nimport { Provider } from '../api/types';\nimport { call } from './proxy';\n\nexport const providerApi: ProviderApi = {\n  getProvider() {\n    return timeout(call<Provider>('provider.getProvider'), 1000).catch(() => Promise.reject('NO_PROVIDER'));\n  }\n};\n","import { WindowPostMessageProxy } from '@ont-community/window-post-message-proxy';\nimport { Rpc } from '../rpc/rpc';\n\nlet windowProxy: WindowPostMessageProxy;\nlet rpc: Rpc;\n\nexport function registerClient({\n  logMessages = false,\n  logWarnings = false\n}: {\n  logMessages?: boolean;\n  logWarnings?: boolean;\n}) {\n  windowProxy = new WindowPostMessageProxy({\n    name: 'page',\n    target: 'content-script',\n    logMessages,\n    suppressWarnings: !logWarnings\n  });\n  rpc = new Rpc({\n    source: 'page',\n    destination: 'background',\n    logMessages: false,\n    postMessage: windowProxy.postMessage.bind(windowProxy, window)\n  });\n}\n\nexport async function call<RESULT>(method: string, ...params: any[]) {\n  return rpc.call<RESULT>(method, ...params);\n}\n","import { SmartContractApi } from '../api/smartContract';\nimport { Response } from '../api/types';\nimport { call } from './proxy';\n\nexport const smartContractApi: SmartContractApi = {\n  invoke(args) {\n    return call<Response>('smartContract.invoke', args);\n  },\n\n  invokeRead(args): Promise<any> {\n    return call<void>('smartContract.invokeRead', args);\n  },\n\n  deploy(args): Promise<void> {\n    return call<void>('smartContract.deploy', args);\n  },\n  invokeWasm(args) {\n    return call<Response>('smartContract.invokeWasm', args);\n  },\n\n  invokeWasmRead(args): Promise<any> {\n    return call<void>('smartContract.invokeWasmRead', args);\n  }\n};\n","import { StateChannelApi } from '../api/stateChannel';\nimport { Signature } from '../api/types';\nimport { call } from './proxy';\n\nexport const stateChannelApi: StateChannelApi = {\n  login() {\n    return call<string>('stateChannel.login');\n  },\n\n  sign(args) {\n    return call<Signature>('stateChannel.sign', args);\n  }\n};\n","import * as baseX from 'base-x';\nimport * as cryptoJS from 'crypto-js';\n\n/* eslint-disable global-require */\nconst typedarrayToBuffer = require('typedarray-to-buffer');\n/* eslint-enable global-require */\n\nimport { UtilsApi } from '../api/utils';\n\nconst base58 = baseX('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\n\nexport const utilsApi: UtilsApi = {\n  strToHex(str: string) {\n    return ab2hexstring(str2ab(str));\n  },\n\n  hexToStr(hex: string) {\n    return ab2str(hexstring2ab(hex));\n  },\n\n  addressToHex(str: string) {\n    return base58ToHex(str);\n  },\n\n  hexToAddress(str: string) {\n    return hexToBase58(str);\n  },\n\n  isAddress(str: string) {\n    try {\n      base58ToHex(str);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  }\n};\n\nfunction base58ToHex(base58Encoded: string) {\n  const decoded = base58.decode(base58Encoded);\n  const hexEncoded = ab2hexstring(decoded).substr(2, 40);\n\n  if (base58Encoded !== hexToBase58(hexEncoded)) {\n    throw new Error('[addressToU160] decode encoded verify failed');\n  }\n  return hexEncoded;\n}\n\nconst ADDR_VERSION = '17';\n\nfunction hexToBase58(hexEncoded: string): string {\n  const data = ADDR_VERSION + hexEncoded;\n\n  const hash = sha256(data);\n  const hash2 = sha256(hash);\n  const checksum = hash2.slice(0, 8);\n\n  const datas = data + checksum;\n\n  const buffer = typedarrayToBuffer(new Uint8Array(hexstring2ab(datas)));\n\n  return base58.encode(buffer);\n}\n\nfunction sha256(data: string) {\n  const hex = cryptoJS.enc.Hex.parse(data);\n  const sha = cryptoJS.SHA256(hex).toString();\n  return sha;\n}\n\nfunction hexstring2ab(str: string): number[] {\n  const result = [];\n\n  while (str.length >= 2) {\n    result.push(parseInt(str.substring(0, 2), 16));\n    str = str.substring(2, str.length);\n  }\n\n  return result;\n}\n\nfunction ab2hexstring(arr: any): string {\n  let result: string = '';\n  const uint8Arr: Uint8Array = new Uint8Array(arr);\n  for (let i = 0; i < uint8Arr.byteLength; i++) {\n    let str = uint8Arr[i].toString(16);\n    str = str.length === 0 ? '00' : str.length === 1 ? '0' + str : str;\n    result += str;\n  }\n  return result;\n}\n\nfunction ab2str(buf: ArrayBuffer | number[]): string {\n  return String.fromCharCode.apply(null, new Uint8Array(buf));\n}\n\nexport function str2ab(str: string) {\n  const buf = new ArrayBuffer(str.length);\n  const bufView = new Uint8Array(buf);\n  for (let i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n","import * as client from './client';\nimport * as provider from './provider';\nimport { MethodType, Rpc } from './rpc/rpc';\nimport { Caller, Tunnel } from './rpc/tunnel';\n\nexport * from './api';\nexport { Caller, client, provider, Tunnel, MethodType, Rpc };\n","import { WindowPostMessageProxy } from '@ont-community/window-post-message-proxy';\nimport { browser } from 'webextension-polyfill-ts';\nimport { DApi } from './api';\nimport { MethodType, Rpc } from './rpc/rpc';\n\nlet rpc: Rpc;\n\nexport function registerContentProxy({\n  logMessages = false,\n  logWarnings = false\n}: {\n  logMessages?: boolean;\n  logWarnings?: boolean;\n}) {\n  const windowPostMessageProxy = new WindowPostMessageProxy({\n    logMessages,\n    suppressWarnings: !logWarnings,\n    name: 'content-script',\n    target: 'page'\n  });\n\n  windowPostMessageProxy.addHandler({\n    handle: (msg) => browser.runtime.sendMessage(msg),\n    test: (msg) => msg.type === 'dAPI.js' && msg.source === 'page'\n  });\n}\n\nexport function registerProvider({ provider, logMessages }: { provider: DApi; logMessages: boolean }) {\n  rpc = new Rpc({\n    source: 'background',\n    destination: 'page',\n    logMessages,\n    addListener: browser.runtime.onMessage.addListener\n  });\n\n  function checkedRegister(name: string, method: MethodType | undefined) {\n    if (method === undefined) {\n      throw new Error('DApi provider does not implement ' + name);\n    }\n\n    rpc.register(name, method);\n  }\n\n  checkedRegister('asset.getAccount', provider.asset.getAccount);\n  checkedRegister('asset.getPublicKey', provider.asset.getPublicKey);\n  checkedRegister('asset.send', provider.asset.send);\n\n  checkedRegister('identity.getIdentity', provider.identity.getIdentity);\n  checkedRegister('identity.getDDO', provider.identity.getDDO);\n  checkedRegister('identity.addAttributes', provider.identity.addAttributes);\n  checkedRegister('identity.removeAttribute', provider.identity.removeAttribute);\n\n  checkedRegister('message.signMessage', provider.message.signMessage);\n  checkedRegister('message.verifyMessage', provider.message.verifyMessage);\n  checkedRegister('message.signMessageHash', provider.message.signMessageHash);\n  checkedRegister('message.verifyMessageHash', provider.message.verifyMessageHash);\n\n  checkedRegister('network.getAllowance', provider.network.getAllowance);\n  checkedRegister('network.getBalance', provider.network.getBalance);\n  checkedRegister('network.getBlock', provider.network.getBlock);\n  checkedRegister('network.getBlockHeight', provider.network.getBlockHeight);\n  checkedRegister('network.getMerkleProof', provider.network.getMerkleProof);\n  checkedRegister('network.getNetwork', provider.network.getNetwork);\n  checkedRegister('network.getNodeCount', provider.network.getNodeCount);\n  checkedRegister('network.getStorage', provider.network.getStorage);\n  checkedRegister('network.getTransaction', provider.network.getTransaction);\n  checkedRegister('network.isConnected', provider.network.isConnected);\n\n  checkedRegister('network.getUnboundOng', provider.network.getUnboundOng);\n  checkedRegister('network.getContract', provider.network.getContract);\n  checkedRegister('network.getSmartCodeEvent', provider.network.getSmartCodeEvent);\n  checkedRegister('network.getBlockHeightByTxHash', provider.network.getBlockHeightByTxHash);\n  checkedRegister('network.getBlockHash', provider.network.getBlockHash);\n  checkedRegister('network.getBlockTxsByHeight', provider.network.getBlockTxsByHeight);\n  checkedRegister('network.getGasPrice', provider.network.getGasPrice);\n  checkedRegister('network.getGrantOng', provider.network.getGrantOng);\n  checkedRegister('network.getMempoolTxCount', provider.network.getMempoolTxCount);\n  checkedRegister('network.getMempoolTxState', provider.network.getMempoolTxState);\n  checkedRegister('network.getVersion', provider.network.getVersion);\n\n  checkedRegister('smartContract.invoke', provider.smartContract.invoke);\n  checkedRegister('smartContract.invokeRead', provider.smartContract.invokeRead);\n  checkedRegister('smartContract.deploy', provider.smartContract.deploy);\n  checkedRegister('smartContract.invokeWasm', provider.smartContract.invokeWasm);\n  checkedRegister('smartContract.invokeWasmRead', provider.smartContract.invokeWasmRead);\n\n  checkedRegister('provider.getProvider', provider.provider.getProvider);\n\n  checkedRegister('stateChannel.login', provider.stateChannel.login);\n  checkedRegister('stateChannel.sign', provider.stateChannel.sign);\n}\n","import { Caller, Tunnel, TunnelOptions } from './tunnel';\n\nexport type MethodType = (...params: any[]) => any;\n\ninterface MethodCallType {\n  method: string;\n  params: any[];\n}\n\nexport class Rpc {\n  private tunnel: Tunnel<MethodCallType>;\n  private methods: Map<string, MethodType>;\n\n  constructor(options: TunnelOptions) {\n    options.messageHandler = this.messageHandler.bind(this);\n\n    this.tunnel = new Tunnel(options);\n    this.methods = new Map();\n  }\n\n  call<RESULT = any>(method: string, ...params: any[]) {\n    const msg = {\n      method,\n      params\n    };\n\n    return this.tunnel.send<RESULT>(msg);\n  }\n\n  register(name: string, method: MethodType) {\n    this.methods.set(name, method);\n  }\n\n  private messageHandler(msg: MethodCallType, caller: Caller) {\n    const method = this.methods.get(msg.method);\n\n    if (method === undefined) {\n      throw new Error('Unregistered method call: ' + msg.method);\n    }\n\n    return method.call(caller, ...msg.params);\n  }\n}\n","import { Runtime } from 'webextension-polyfill-ts';\n\nexport type CallbackType = (msg: Request) => Promise<Response> | void;\nexport type PostMessageType = (msg: Request) => Promise<Response>;\n\nexport type AddListenerType = (callback: CallbackType) => void;\n\nexport interface Caller {\n  url?: string;\n  id?: string;\n}\n\nexport type MessageHandlerType = (msg: any, caller: Caller) => any;\n\nexport interface Request {\n  payload: any;\n  source: string;\n  destination: string;\n  type: 'dAPI.js';\n}\n\nexport interface Response<TYPE = any> {\n  destination: string;\n  error?: any;\n  payload?: TYPE;\n  source: string;\n  type: 'dAPI.js';\n}\n\nexport interface TunnelOptions {\n  source: string;\n  destination: string;\n  postMessage?: PostMessageType;\n  addListener?: AddListenerType;\n  messageHandler?: MessageHandlerType;\n  logMessages?: boolean;\n}\n\nexport class Tunnel<T = any> {\n  private source: string;\n  private destination: string;\n  private postMessage?: PostMessageType;\n  private messageHandler?: MessageHandlerType;\n\n  private logMessages?: boolean;\n\n  constructor(options: TunnelOptions) {\n    this.source = options.source;\n    this.destination = options.destination;\n    this.postMessage = options.postMessage;\n    this.messageHandler = options.messageHandler;\n    this.logMessages = options.logMessages;\n\n    if (options.addListener === undefined && options.postMessage === undefined) {\n      throw new Error('Either addListener or postMessage must be present.');\n    } else if (options.addListener !== undefined) {\n      if (options.messageHandler === undefined) {\n        throw new Error('MessageHandler must be specified if addListener present.');\n      }\n\n      options.addListener(this.onMessage.bind(this));\n    }\n  }\n\n  async send<RESULT>(msg: T): Promise<RESULT> {\n    const request: Request = {\n      destination: this.destination,\n      payload: msg,\n      source: this.source,\n      type: 'dAPI.js'\n    };\n\n    if (this.postMessage === undefined) {\n      throw new Error('PostMessage was not specified.');\n    }\n\n    if (this.logMessages) {\n      // tslint:disable-next-line:max-line-length\n      // tslint:disable-next-line:no-console\n      console.warn(`Tunnel: (${this.source}): Sending`, JSON.stringify(msg, null, '  '));\n    }\n\n    const response: Response<RESULT> = await this.postMessage(request);\n\n    if (response.error !== undefined) {\n      throw new Error(response.error);\n    } else {\n      return response.payload as RESULT;\n    }\n  }\n\n  private onMessage(request: Request, sender: Runtime.MessageSender): Promise<Response> | void {\n    if (request.destination === this.source && request.source === this.destination) {\n      let promise: Promise<any>;\n\n      try {\n        if (this.messageHandler === undefined) {\n          throw new Error('MessageHandler was not specified.');\n        }\n\n        if (this.logMessages) {\n          // tslint:disable-next-line:max-line-length\n          // tslint:disable-next-line:no-console\n          console.warn(`Tunnel: (${this.source}): Receiving`, JSON.stringify(request.payload, null, '  '));\n        }\n\n        const caller: Caller = {\n          id: sender.id,\n          url: sender.url\n        };\n\n        const response = this.messageHandler(request.payload, caller);\n        promise = Promise.resolve(response);\n      } catch (e) {\n        promise = Promise.reject(e);\n      }\n\n      return promise\n        .then(\n          (result) =>\n            ({\n              destination: request.source,\n              payload: result,\n              source: request.destination,\n              type: 'dAPI.js'\n            } as Response)\n        )\n        .catch(\n          (error) =>\n            ({\n              destination: request.source,\n              error,\n              source: request.destination,\n              type: 'dAPI.js'\n            } as Response)\n        );\n    }\n  }\n}\n","module.exports = require(\"@ont-community/window-post-message-proxy\");","module.exports = require(\"base-x\");","module.exports = require(\"crypto-js\");","module.exports = require(\"promise-timeout\");","module.exports = require(\"typedarray-to-buffer\");","module.exports = require(\"webextension-polyfill-ts\");"],"sourceRoot":""}